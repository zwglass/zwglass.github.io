(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{DG5k:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),o=a.n(n),r=a("9qUX"),l=a("zeV3"),c=a("2/Rp"),s=a("3S7+"),i=(a("91GP"),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"}),u=a("6VBw"),d=function(e,t){return n.createElement(u.a,Object.assign({},e,{ref:t,icon:i}))};d.displayName="ReloadOutlined";var m=n.forwardRef(d),b=(a("f3/d"),a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),a("Z2Ku"),a("L9s1"),a("tsqr")),f=a("VXEj"),p=function(e){var t=e.sendRequest;return e.showLoadMoreButton?o.a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},o.a.createElement(c.a,{onClick:t},"loading more")):null},j=a("scZm"),O=a("kLXV"),E=a("colo"),v=a("Sm+g"),g=["adminer/v1/admin"],y=function(e){var t=e.requestCount,a=e.reqObject,n=e.responseDataHandle,r=[].concat(g)[0];return o.a.createElement(v.a,{responseDataHandle:n,api:r,method:"post",reqParams:{},reqObject:a,requestCount:t})};y.defaultProps={requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var S=function(e){var t=e.adminerId,a=e.requestCount,n=e.reqObject,r=e.responseDataHandle,l=[].concat(g)[0]+"/"+t;return o.a.createElement(v.a,{responseDataHandle:r,api:l,method:"put",reqParams:{},reqObject:n,requestCount:a})};S.defaultProps={adminerId:0,requestCount:0,reqObject:{},responseDataHandle:function(e){console.log(e)}};var q=function(e){var t=e.requestCount,a=e.reqParams,n=e.responseDataHandle,r=[].concat(g)[0];return o.a.createElement(v.a,{responseDataHandle:n,api:r,method:"get",reqParams:a,reqObject:{},requestCount:t})};q.defaultProps={requestCount:0,reqParams:{},responseDataHandle:function(e){console.log(e)}};var C=function(e){var t=e.requestCount,a=e.adminId,n=e.responseDataHandle,r=[].concat(g)[0]+"/"+a;return o.a.createElement(v.a,{responseDataHandle:n,api:r,method:"delete",reqParams:{},reqObject:{},requestCount:t})};C.defaultProps={requestCount:0,adminId:0,responseDataHandle:function(e){console.log(e)}};a("a1Th");var h=a("Vl3Y"),_=a("5rEg"),H=a("7BUj").a.formCommonStyle,w=H.layoutForm,k=H.formItemLayout,D=H.tailFormItemLayout,F=function(e){var t=e.columns,a=e.disabledKeys,r=e.notShowKeys,s=e.formKeyLabelObj,i=e.formKeySelectComponentsObj,u=e.onFinish,d=e.cancelHandle,m=e.deleteHandle,b=e.showDeleteButton,f=e.updateFormObj,p=e.formInitialObj,j=e.initFormCount,O=h.a.useForm()[0];return Object(n.useEffect)((function(){console.log(f),O.setFieldsValue(f)}),[f]),Object(n.useEffect)((function(){O.setFieldsValue(p)}),[j]),o.a.createElement(h.a,Object.assign({},w,{form:O,layout:"horizontal",onFinish:u,name:"adminer_info_edit"}),t.map((function(e){if(r.includes(e))return null;var t=a.includes(e),n=s[e],l=f[e];return o.a.createElement(h.a.Item,Object.assign({},k,{name:e,label:n,key:e.toString(),initialValue:l}),Object.keys(i).includes(e)?i[e]:o.a.createElement(_.a,{placeholder:"请输入 "+n,disabled:t}))})),o.a.createElement(h.a.Item,D,o.a.createElement(l.a,null,o.a.createElement(c.a,{type:"primary",htmlType:"submit"},"提交"),o.a.createElement(c.a,{onClick:d},"取消"),b?o.a.createElement(c.a,{onClick:m},"删除"):null)))};F.defaultProps={columns:[],disabledKeys:[],notShowKeys:[],formKeyLabelObj:{},formKeySelectComponentsObj:{},onFinish:function(e){console.log(e)},cancelHandle:function(){console.log("Cancel Handle")},deleteHandle:function(){console.log("Delete Handle")},showDeleteButton:!1,updateFormObj:{},formInitialObj:{},initFormCount:0};var I=a("vpoQ"),P=["id","name","mobile","email","wx_openid","people_id","address","title","avatar","add_time","update_time","on_job"],K={id:"0",name:"",mobile:"",email:"",people_id:"",address:"",title:"",add_time:"",update_time:"",on_job:!0},M=["id","wx_openid","mobile","avatar","add_time","update_time"],L=["avatar","wx_openid"],R={id:"ID",name:"名称",mobile:"手机",email:"E-Mail",people_id:"身份证",address:"地址",title:"职务",add_time:"加入日期",update_time:"更新日期",on_job:"在职"},x={on_job:o.a.createElement(I.a,{options:[{value:!0,label:"在职"},{value:!1,label:"离职"}]}),title:o.a.createElement(I.a,{options:[{value:1,label:"super_admin"},{value:2,label:"admin"}]})},B=a("nMFz"),V=function(e){var t=e.adminObj,a=e.modalState,r=e.setModalState,l=Object(n.useState)(!1),c=l[0],s=l[1],i=Object(n.useState)(0),u=i[0],d=i[1],m=Object(n.useState)(0),f=m[0],p=m[1],j=Object(n.useState)(0),v=j[0],g=j[1],y=Object(n.useState)(0),q=y[0],h=y[1],_=Object(n.useRef)({}),H=Object(n.useRef)({}),w=function(){console.log("Cancel.."),d(u+1),H.current={},h(q+1),r(!1)};return o.a.createElement(O.a,{title:"管理员详情",getContainer:!1,visible:a,footer:null,closable:!1},o.a.createElement(E.a,{spinning:c}),o.a.createElement("div",{className:"avatar-box"},o.a.createElement(B.a,{oldImageUrl:t.avatar,avatarSize:64,uploadedResponseHandle:function(e){console.log(e);var t=Object.assign({},e);Object.keys(t).includes("code")&&Object.keys(t).includes("image_cos_name")&&1e3===t.code?H.current={avatar:t.image_cos_name}:H.current={}},cleanFileListCount:u})),o.a.createElement(F,{columns:P,disabledKeys:M,notShowKeys:L,formKeyLabelObj:R,formKeySelectComponentsObj:x,onFinish:function(e){console.log(e),_.current=Object.assign({},e,H.current),s(!0),p(f+1)},cancelHandle:w,deleteHandle:function(e){g(v+1)},showDeleteButton:!0,updateFormObj:t,formInitialObj:K,initFormCount:q}),o.a.createElement(S,{adminerId:t.id,requestCount:f,reqObject:_.current,responseDataHandle:function(e){s(!1),console.log(e),Object.keys(e).includes("code")&&1e3===e.code?(b.a.success("Success update admin!"),b.a.success("修改成功!"),w()):(b.a.error("Error..."),b.a.error("网络错误, 请检查..."))}}),o.a.createElement(C,{adminId:t.id,requestCount:v,responseDataHandle:function(e){console.log(e),w()}}))};V.defaultProps={adminObj:{},modalState:!1,setModalState:function(e){console.log("Colse Modal "+e+"...")}};var A=V,z=["未知","super-admin","admin"],G=function(e){var t=e.selectAdminHandle,a=e.queryAdminsParams,r=Object(n.useState)([]),l=r[0],s=r[1],i=Object(n.useState)(!1),u=i[0],d=i[1],m=Object(n.useState)({}),O=m[0],E=m[1],v=Object(n.useState)(0),g=v[0],y=v[1],S=Object(n.useState)(!0),C=S[0],h=S[1];Object(n.useEffect)((function(){s([]),_()}),[a]);var _=function(){y(g+1),h(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.b,{itemLayout:"vertical",loadMore:o.a.createElement(p,{sendRequest:_,showLoadMoreButton:C}),dataSource:l,renderItem:function(e){return o.a.createElement(f.b.Item,{actions:[o.a.createElement(c.a,{onClick:function(){return t(e)},type:"link"},"选择"),o.a.createElement(c.a,{onClick:function(){return t=e,console.log(t),E(t),void d(!0);var t},type:"link"},"详情")]},o.a.createElement(f.b.Item.Meta,{avatar:o.a.createElement(j.a,{src:e.avatar,width:64}),title:"姓名: "+e.name+", 手机: "+e.mobile+", 住址: "+e.address+";",description:"职务: "+z[e.title]}))}}),o.a.createElement(q,{requestCount:g,reqParams:a,responseDataHandle:function(e){if(Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("results")){var t=[].concat(e.results);s(t),e.next&&h(!0)}else b.a.error("Error: network..."),b.a.error("Error: 网络错误..."),s([]),h(!0)}}),o.a.createElement(A,{adminObj:O,modalState:u,setModalState:d}))};G.defaultProps={selectAdminHandle:function(e){console.log(e)},queryAdminsParams:{}};var N=G,T=["id","avatar","wx_openid","add_time","update_time","on_job"],U=function(e){var t=e.modalState,a=e.setModalState,r=Object(n.useState)(!1),l=r[0],c=r[1],s=Object(n.useRef)({}),i=Object(n.useRef)({}),u=Object(n.useState)(0),d=u[0],m=u[1],f=Object(n.useState)(0),p=f[0],j=f[1],v=Object(n.useState)(0),g=v[0],S=v[1],q=function(){s.current={},i.current={},S(g+1),j(p+1),a(!1)};return o.a.createElement(O.a,{title:"创建管理员",getContainer:!1,visible:t,footer:null,closable:!1},o.a.createElement(E.a,{spinning:l}),o.a.createElement("div",{className:"avatar-box"},o.a.createElement(B.a,{avatarSize:64,uploadedResponseHandle:function(e,t){Object.keys(e).includes("code")&&1e3===e.code&&Object.keys(e).includes("image_cos_name")&&(s.current={avatar:e.image_cos_name})},cleanFileListCount:p})),o.a.createElement(F,{columns:P,disabledKeys:M,notShowKeys:T,formKeyLabelObj:R,formKeySelectComponentsObj:x,onFinish:function(e){c(!0),i.current=Object.assign({},e,s.current),m(d+1)},cancelHandle:q,showDeleteButton:!1,formInitialObj:K,initFormCount:g}),o.a.createElement(y,{requestCount:d,reqObject:i.current,responseDataHandle:function(e){c(!1),Object.keys(e).includes("code")&&1e3===e.code?(b.a.success("Success"),b.a.success("创建管理员成功!"),q()):(b.a.success("Error..."),b.a.success("Error: 网络错误..."))}}))};U.defaultProps={modalState:!1,setModalState:function(e){console.log(e)}};var X=U,J=function(){var e=Object(n.useState)(!1),t=e[0],a=e[1],r=Object(n.useState)({}),i=r[0],u=r[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,null,o.a.createElement(c.a,{type:"default",onClick:function(){return a(!0)}},"创建管理员"),o.a.createElement(s.a,{title:"刷新"},o.a.createElement(c.a,{type:"primary",shape:"circle",icon:o.a.createElement(m,null),onClick:function(){u({id:0}),u({})}}))),o.a.createElement("br",null),o.a.createElement("hr",null),o.a.createElement(N,{queryAdminsParams:i}),o.a.createElement(X,{modalState:t,setModalState:a}))};t.default=function(){return o.a.createElement(r.a,null,o.a.createElement(J,null))}}}]);
//# sourceMappingURL=component---src-pages-adminers-js-34933147f5a79304b12c.js.map